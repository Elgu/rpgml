
RPGML_SRC_ROOT=$(shell while [ ! -d "ROOT" -a `pwd` != "/" ]; do cd .. ; done && echo `pwd` )

.SUFFIXES: .o .cpp .cc .hh .yy .dep .output .expected .rpgml

CFLAGS=\
	-std=c++11\
	-fnon-call-exceptions\
	-rdynamic\
	-Wall\
	-Wextra\
	-Wformat\
	-Winit-self\
	-Wuninitialized\
	-Wsuggest-attribute=pure\
	-Wsuggest-attribute=const\
	-Wshadow\
	-Wwrite-strings\
	-Wconversion\
	-Wlogical-op\
	-Wswitch\
	-I$(RPGML_SRC_ROOT)/libRPGML/\
 	-fPIC\
	-g -O0\
	-DDEBUG\

#	-Wsuggest-attribute=noreturn\

CXXFLAGS=$(CFLAGS)

LDFLAGS=\
	-rdynamic\
	-lpthread\
	-L$(RPGML_SRC_ROOT)/libRPGML\

STEST_SCRIPTS=$(shell find . -name "stest_*.rpgml" -type f )

STEST_RESULTS=\
	$(STEST_SCRIPTS:.rpgml=.output)\
# 	$(STEST_SCRIPTS:.rpgml=.pretty)\

TIMEOUT_SECONDS=1

RPGML=$(RPGML_SRC_ROOT)/rpgml/rpgml
PRETTYPRINTER=$(RPGML_SRC_ROOT)/rpgml/prettyprinter

